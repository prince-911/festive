def get_all_users(search_query=None):
    from app import mysql
    con=mysql.connect
    cur=con.cursor(MySQLdb.cursors.DictCursor)
    if search_query:
        cur.execute("SELECT uid, name, email, gender, phone FROM user_details WHERE name LIKE %s", (f"%{search_query}%",))
    else:
        cur.execute("SELECT uid, name, email, gender, phone FROM user_details")
    users = cur.fetchall()
    cur.close()
    return users

def get_all_bookings():
    from app import mysql
    con=mysql.connect
    cur=con.cursor(MySQLdb.cursors.DictCursor)
    cur.execute("SELECT bid, date, starttime, endtime, location, price, theme_name,uid FROM booking_details1")
    print("hi booking details")
    bookings = cur.fetchall()
    cur.close()
    return bookings

def delete_user_by_id(user_id):
    from app import mysql
    con=mysql.connect
    cur=con.cursor(MySQLdb.cursors.DictCursor)
    cur.execute("DELETE FROM user_details WHERE uid=%s", (user_id,))
    mysql.connection.commit()
    cur.close()
    con.commit()
