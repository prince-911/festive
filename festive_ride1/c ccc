@app.route('/admin', methods=['GET'])
@no_cache
def admin_dashboard():
    if session.get('role') != 'admin':
        flash("You are not authorized to view this page", "danger")
        return redirect(url_for('index'))

    search_query = request.args.get('search', '').strip()
    users = get_all_users(search_query)
    bookings = get_all_bookings()

    return render_template("admin.html", users=users, bookings=bookings, search_query=search_query)
